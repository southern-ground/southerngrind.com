!function(a){function b(a){var b=window.location.search,c=new RegExp("[?|&]"+a+"=(.*?)&"),d=c.exec(b+"&");return!d||d.length<2?"":decodeURIComponent(d[1].replace("+"," "))}function c(a,b,c){c=c||window.location.search;var d=c+"&",e=new RegExp("[?|&]"+a+"=.*?&");return e.test(d)?d=d.replace(e,"&"+a+"="+encodeURIComponent(b)+"&"):d+=a+"="+encodeURI(b),d=d.trimStart("&").trimEnd("&"),"?"==d[0]?d:d="?"+d}a(function(){a(".video_clicker").on("click",function(){a(this).hide(),a(this).next().attr("src","http://www.youtube.com/embed/gH7cmIGQvXg?autoplay=1&rel=0").show()});var d=new Share(".share_button",{title:"Build Your Own Bad Monkey",image:a(".final_image:first").attr("src"),networks:{facebook:{},pinterest:{},twitter:{},google_plus:{enabled:!1},email:{enabled:!1}}});a(".share_button").hide();var e=a(".bad_monkey_page .total_price");if(e.length>0&&e.html("$"+parseFloat(e.attr("data-base"))),a(".option").on("click",function(){var b=a(this).parent().attr("data-type");b=b.charAt(0).toUpperCase()+b.slice(1),_gaq.push(["_trackEvent","Button","Click",b+": "+a(this).attr("data-name")]);var d=parseFloat(a(this).siblings(".selected").attr("data-price-change"))||0;a(this).siblings(".selected").removeClass("selected");var f=parseFloat(a(this).attr("data-price-change"));if(a(this).addClass("selected"),e.html("$"+(parseFloat(e.html().slice(1))+f-d)),a(".final_image:visible").fadeOut(300),a(".share_button").hide(),history.pushState){var g=c(a(this).parent().attr("data-type"),a(this).attr("data-name")),h=window.location.protocol+"//"+window.location.host+window.location.pathname+g;window.history.pushState({path:h},"",h)}else{var g=c(a(this).parent().attr("data-type"),a(this).attr("data-name"),a('meta[property="og:url"]').attr("content").split("?")[1]),h=window.location.protocol+"//"+window.location.host+window.location.pathname+g;a('meta[property="og:url"]').attr("content",h)}}),a(".bad_monkey_page .reset_blade").on("click",function(){if(_gaq.push(["_trackEvent","Button","Click","Reset Blade"]),a(".option.selected").removeClass("selected"),e.html("$"+parseFloat(e.attr("data-base"))),a(".final_image:visible").fadeOut(300),a(".share_button").hide(),a("html, body").animate({scrollTop:a(".section_heading:first").offset().top}),history.pushState){var b=window.location.search;b=c("blade","",b),b=c("handle","",b),b=c("finish","",b);var d=window.location.protocol+"//"+window.location.host+window.location.pathname+b;window.history.pushState({path:d},"",d)}else{var b=a('meta[property="og:url"]').attr("content").split("?")[1];b=c("blade","",b),b=c("handle","",b),b=c("finish","",b);var d=window.location.protocol+"//"+window.location.host+window.location.pathname+b;a('meta[property="og:url"]').attr("content",d)}}),a(".bad_monkey_page .build_blade").on("click",function(){if(_gaq.push(["_trackEvent","Button","Click","Build Blade"]),0!=a(".blade_options .selected").length&&0!=a(".handle_options .selected").length&&0!=a(".finish_options .selected").length){var b=a(".blade_options .selected").attr("data-name")+"_"+a(".handle_options .selected").attr("data-name")+"_"+a(".finish_options .selected").attr("data-name");a(".final_image:not(."+b+")").fadeOut(300,function(){a(".final_image."+b).fadeIn(300)}),a(".bad_monkey_page .download_blade").attr("href",a(".final_image."+b).attr("data-url")),a(".share_button").show(),d.config.image=a(".final_image."+b).attr("src"),d.config.networks.facebook.image=a(".final_image."+b).attr("src"),d.config.networks.pinterest.image=a(".final_image."+b).attr("src"),history.pushState?(d.config.url=window.location.href,d.config.networks.facebook.url=window.location.href,d.config.networks.pinterest.url=window.location.href,d.config.networks.twitter.url=window.location.href):(d.config.url=a('meta[property="og:url"]').attr("content"),d.config.networks.facebook.url=a('meta[property="og:url"]').attr("content"),d.config.networks.pinterest.url=a('meta[property="og:url"]').attr("content"),d.config.networks.twitter.url=a('meta[property="og:url"]').attr("content")),a("html, body").animate({scrollTop:a(".finished_knife").offset().top+a(".finished_knife").height()-window.innerHeight})}}),b("blade")&&""!=b("blade")&&a('.option[data-name="'+b("blade")+'"]').addClass("selected"),b("finish")&&""!=b("finish")&&a('.option[data-name="'+b("finish")+'"]').addClass("selected"),b("handle")&&""!=b("handle")&&a('.option[data-name="'+b("handle")+'"]').addClass("selected"),a(".blade_options .selected").length>0&&a(".handle_options .selected").length>0&&a(".finish_options .selected").length>0){var f=a(".blade_options .selected").attr("data-name")+"_"+a(".handle_options .selected").attr("data-name")+"_"+a(".finish_options .selected").attr("data-name");a(".final_image."+f).show(),a(".bad_monkey_page .download_blade").attr("href",a(".final_image."+f).attr("data-url")),a(".share_button").show()}a(".bad_monkey_page .download_blade").on("click",function(){if(0!=a(".blade_options .selected").length&&0!=a(".handle_options .selected").length&&0!=a(".finish_options .selected").length){var b=a(".blade_options .selected").attr("data-name")+"_"+a(".handle_options .selected").attr("data-name")+"_"+a(".finish_options .selected").attr("data-name");a(".final_image:not(."+b+")").fadeOut(300,function(){a(".final_image."+b).fadeIn(300)}),a(".bad_monkey_page .download_blade").attr("href",a(".final_image."+b).attr("data-url")),a(".share_button").show(),_gaq.push(["_trackEvent","Button","Click","Place Order"])}}),a(".bad_monkey_page .share_button").on("click",function(){_gaq.push(["_trackEvent","Button","Click","Social Share"])}),a("li.menu-item-type-taxonomy a").on("click",function(a){return a.preventDefault(),!1}),a("#myform").validate(),a("#id_email").attr("placeholder","Enter your email address"),a("#e2ma_signup_submit_button").attr("value","Sign Up")}),String.prototype.trimEnd=function(a){return a?this.replace(new RegExp(a.escapeRegExp()+"*$"),""):this.replace(/\s+$/,"")},String.prototype.trimStart=function(a){return a?this.replace(new RegExp("^"+a.escapeRegExp()+"*"),""):this.replace(/^\s+/,"")},String.prototype.escapeRegExp=function(){return this.replace(/[.*+?^${}()|[\]\/\\]/g,"\\$0")}}(jQuery);